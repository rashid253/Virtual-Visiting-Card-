<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Carousel Editable Template</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* Reset and basic styling */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #e6e9f0, #eef1f5);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      min-height: 100vh;
    }
    /* Slider container */
    .slider-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      overflow: hidden;
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      background: #fff;
    }
    /* Slides wrapper â€“ width is 4 times the container */
    .slides {
      display: flex;
      transition: transform 0.8s ease;
      width: 400%;
    }
    /* Each slide */
    .slide {
      flex: 1 0 100%;
      padding: 20px;
    }
    /* Editable template content */
    .template {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .text-content {
      /* Text is at the top */
    }
    .text-content h2,
    .text-content p {
      margin: 0;
      padding: 4px 0;
    }
    .text-content h2 {
      font-size: 1.8rem;
      color: #ff007f;
      font-weight: 600;
    }
    .text-content p {
      font-size: 1rem;
      color: #555;
      line-height: 1.5;
    }
    /* When editing, show a dashed border */
    .text-content [contenteditable="true"] {
      border: 1px dashed #ccc;
      padding: 4px;
      border-radius: 4px;
    }
    .error {
      color: red;
      font-size: 0.9rem;
      margin-top: -4px;
    }
    /* Image upload area below text */
    .image-upload {
      text-align: center;
    }
    .image-upload img {
      width: 100%;
      max-width: 300px;
      height: auto;
      object-fit: cover;
      border-radius: 12px;
      /* Initially show a border box */
      border: 2px dashed #007bff;
      margin: 0 auto;
      display: block;
    }
    .upload-btn {
      margin-top: 8px;
      padding: 8px 16px;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    input[type="file"] {
      display: none;
    }
    /* Navigation dots */
    .dots {
      text-align: center;
      margin-top: 12px;
    }
    .dot {
      height: 12px;
      width: 12px;
      margin: 0 5px;
      background-color: #bbb;
      border-radius: 50%;
      display: inline-block;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .dot.active {
      background-color: #ff007f;
    }
    /* Auto slide animation will be handled by JS */
    /* Mobile responsiveness */
    @media (max-width: 600px) {
      .text-content h2 { font-size: 1.6rem; }
      .text-content p { font-size: 0.9rem; }
      .upload-btn { font-size: 0.8rem; }
    }
  </style>
</head>
<body>

<!-- Slider Container -->
<div class="slider-container">
  <div class="slides">
    <!-- Slide 1 -->
    <div class="slide">
      <div class="template">
        <div class="text-content">
          <h2 id="title1" contenteditable="true">Template 1 Title</h2>
          <p id="desc1" contenteditable="true">Template 1 description goes here. (Keep title under 10 words and description under 50 words.)</p>
          <div id="error1" class="error"></div>
        </div>
        <div class="image-upload">
          <img id="img1" src="https://via.placeholder.com/300x200.png?text=Upload+Image" alt="Image 1">
          <button class="upload-btn" data-card="1">Upload Image</button>
          <input type="file" class="file-input" data-card="1" accept="image/*">
        </div>
      </div>
    </div>
    <!-- Slide 2 -->
    <div class="slide">
      <div class="template">
        <div class="text-content">
          <h2 id="title2" contenteditable="true">Template 2 Title</h2>
          <p id="desc2" contenteditable="true">Template 2 description goes here. (Keep title under 10 words and description under 50 words.)</p>
          <div id="error2" class="error"></div>
        </div>
        <div class="image-upload">
          <img id="img2" src="https://via.placeholder.com/300x200.png?text=Upload+Image" alt="Image 2">
          <button class="upload-btn" data-card="2">Upload Image</button>
          <input type="file" class="file-input" data-card="2" accept="image/*">
        </div>
      </div>
    </div>
    <!-- Slide 3 -->
    <div class="slide">
      <div class="template">
        <div class="text-content">
          <h2 id="title3" contenteditable="true">Template 3 Title</h2>
          <p id="desc3" contenteditable="true">Template 3 description goes here. (Keep title under 10 words and description under 50 words.)</p>
          <div id="error3" class="error"></div>
        </div>
        <div class="image-upload">
          <img id="img3" src="https://via.placeholder.com/300x200.png?text=Upload+Image" alt="Image 3">
          <button class="upload-btn" data-card="3">Upload Image</button>
          <input type="file" class="file-input" data-card="3" accept="image/*">
        </div>
      </div>
    </div>
    <!-- Slide 4 -->
    <div class="slide">
      <div class="template">
        <div class="text-content">
          <h2 id="title4" contenteditable="true">Template 4 Title</h2>
          <p id="desc4" contenteditable="true">Template 4 description goes here. (Keep title under 10 words and description under 50 words.)</p>
          <div id="error4" class="error"></div>
        </div>
        <div class="image-upload">
          <img id="img4" src="https://via.placeholder.com/300x200.png?text=Upload+Image" alt="Image 4">
          <button class="upload-btn" data-card="4">Upload Image</button>
          <input type="file" class="file-input" data-card="4" accept="image/*">
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Navigation Dots -->
<div class="dots">
  <span class="dot active" data-index="0"></span>
  <span class="dot" data-index="1"></span>
  <span class="dot" data-index="2"></span>
  <span class="dot" data-index="3"></span>
</div>

<script>
  // ---------- Carousel Auto Slide & Dots Navigation ----------
  const slides = document.querySelector('.slides');
  const dots = document.querySelectorAll('.dot');
  let currentSlide = 0;
  const totalSlides = dots.length;
  const slideInterval = 4000; // 4 seconds per slide

  function goToSlide(n) {
    currentSlide = (n + totalSlides) % totalSlides;
    slides.style.transform = 'translateX(-' + (currentSlide * 100) + '%)';
    dots.forEach(dot => dot.classList.remove('active'));
    dots[currentSlide].classList.add('active');
  }

  dots.forEach(dot => {
    dot.addEventListener('click', function() {
      goToSlide(parseInt(this.getAttribute('data-index')));
    });
  });

  setInterval(() => {
    goToSlide(currentSlide + 1);
  }, slideInterval);

  // ---------- Editable Text with Word Limits ----------
  const TITLE_LIMIT = 10;
  const DESC_LIMIT = 50;
  
  function countWords(str) {
    return str.trim().split(/\s+/).filter(word => word).length;
  }
  
  function enforceLimit(el, limit) {
    let words = el.innerText.trim().split(/\s+/);
    if(words.length > limit) {
      el.innerText = words.slice(0, limit).join(" ");
      placeCaretAtEnd(el);
    }
  }
  
  function placeCaretAtEnd(el) {
    el.focus();
    if(window.getSelection && document.createRange) {
      let range = document.createRange();
      range.selectNodeContents(el);
      range.collapse(false);
      let sel = window.getSelection();
      sel.removeAllRanges();
      sel.addRange(range);
    }
  }
  
  document.querySelectorAll('.text-content h2[contenteditable], .text-content p[contenteditable]').forEach(el => {
    el.addEventListener('input', function() {
      if(el.tagName === "H2") enforceLimit(el, TITLE_LIMIT);
      else enforceLimit(el, DESC_LIMIT);
    });
  });
  
  // ---------- Image Upload Logic ----------
  document.querySelectorAll('.file-input').forEach(input => {
    input.addEventListener('change', function() {
      const cardNum = this.getAttribute('data-card');
      const file = this.files[0];
      if(file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('img' + cardNum).src = e.target.result;
          // Remove the dashed border once an image is uploaded
          document.getElementById('img' + cardNum).style.border = 'none';
        }
        reader.readAsDataURL(file);
      }
    });
  });
  
  // Bind upload buttons to corresponding file inputs
  document.querySelectorAll('.upload-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const cardNum = this.getAttribute('data-card');
      document.querySelector('.file-input[data-card="' + cardNum + '"]').click();
    });
  });
</script>

</body>
</html>
